\documentclass[11pt]{article}
\usepackage{enumerate}
\usepackage{tikz,tikz-cd,tikz-3dplot,pgfplots}
\usepackage{amsmath,amsthm,amssymb,amsfonts,amsthm}
\usepackage{mathrsfs}
\usepackage{bm,bbm}
\usepackage{braket}
\usepackage{slashed}
\usepackage{tensor}
\usepackage{indentfirst}
\usepackage[a4paper, total={6.5in, 9in}]{geometry}
\usetikzlibrary{decorations.markings,positioning,decorations.pathmorphing}
\allowdisplaybreaks
\pgfplotsset{width=10cm, compat=1.16}
\renewcommand\bra[1]{{\langle{#1}|}}
\renewcommand\ket[1]{{|{#1}\rangle}}
\renewcommand\bfdefault{b}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}{Corollary}[theorem]
\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\theoremstyle{remark}
\newtheorem{remark}{Remark}[section]

\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\csch}{csch}
\DeclareMathOperator{\arcsec}{arcsec}
\DeclareMathOperator{\arccot}{arccot}
\DeclareMathOperator{\arccsc}{arccsc}
\DeclareMathOperator{\arccosh}{arccosh}
\DeclareMathOperator{\arcsinh}{arcsinh}
\DeclareMathOperator{\arctanh}{arctanh}
\DeclareMathOperator{\arcsech}{arcsech}
\DeclareMathOperator{\arccsch}{arccsch}
\DeclareMathOperator{\arccoth}{arccoth} 

\begin{document}
	metric convention: $(+,-,-,-)$
	\section{Scalar Loop}
	Lagrangian:
	\[\mathcal{L}=\frac{1}{2}\partial_{\mu}\phi\partial^{\mu}\phi-\frac{1}{2}M^{2}\phi^{2}+\partial_{\mu}\chi^{\dagger}\partial^{\mu}\chi-m^{2}\chi^{\dagger}\chi-g\phi\chi^{\dagger}\chi.\]
	One-loop self energy for $\phi$:
	\[\Sigma(p^{2})=-ig^{2}\int\frac{d^{4}q}{(2\pi)^{4}}\frac{1}{(q^{2}-m^{2})[(q-p)^{2}-m^{2}]}-(Ap^{2}+BM^{2}).\]
	Loop calculation with DimReg ($d=4-2\epsilon$):
	\begin{align*}
		\Sigma&=-ig^{2}\int\frac{d^{d}q}{(2\pi)^{d}}\int_{0}^{1}dx\,\Big((1-x)(q^{2}-m^{2})+x[(q-p)^{2}-m^{2}]\Big)^{-2}-(Ap^{2}+BM^{2})\\
		&=-ig^{2}\int\frac{d^{d}q}{(2\pi)^{d}}\int_{0}^{1}dx\,(q^{2}-2xq\cdot p+xp^{2}-m^{2})^{-2}-(Ap^{2}+BM^{2})\\
		&=-ig^{2}\int_{0}^{1}dx\,\int\frac{d^{d}l}{(2\pi)^{d}}(l^{2}-\Delta)^{-2}-(Ap^{2}+BM^{2})\\
		&=\frac{g^{2}}{16\pi^{2}}\int_{0}^{1}dx\,\left(\frac{4\pi}{\Delta}\right)^{\epsilon}\Gamma(\epsilon)-(Ap^{2}+BM^{2})\\
		&=\frac{g^{2}}{16\pi^{2}}\int_{0}^{1}dx\,\left(\epsilon^{-1}-\gamma+\ln\frac{4\pi}{\Delta}\right)-(Ap^{2}+BM^{2})\\
		&=\frac{g^{2}}{16\pi^{2}}\left(\epsilon^{-1}-\gamma+\int_{0}^{1}dx\,\ln\frac{4\pi}{\Delta}\right)-(Ap^{2}+BM^{2}),
	\end{align*}
	where $l:=q-xp$ and $\Delta:=-x(1-x)p^{2}+m^{2}$.
	
	For on-shell renorm, we calculate $\Sigma(M^{2})$ and $\Sigma'(M^{2})$:
	\begin{align*}
		\Sigma(M^{2})&=\frac{g^{2}}{16\pi^{2}}\left(\epsilon^{-1}-\gamma+\int_{0}^{1}dx\,\ln\frac{4\pi}{-x(1-x)M^{2}+m^{2}}\right)-(A+B)M^{2},\\
		\Sigma'(M^{2})&=\frac{g^{2}}{16\pi^{2}}\int_{0}^{1}dx\,\frac{x(1-x)}{-x(1-x)M^{2}+m^{2}}-A.
	\end{align*}
	Hence, putting $\mathrm{Re}\,\Sigma(M^{2})=\mathrm{Re}\,\Sigma'(M^{2})=0$ gives
	\[A=\frac{g^{2}}{16\pi^{2}}C_{1},\quad B=\frac{g^{2}}{16\pi^{2}M^{2}}\left(\epsilon^{-1}-\gamma+\ln(4\pi)-M^{2}C_{1}+C_{2}\right)\]
	for
	\[C_{1}:=\mathrm{Re}\,\int_{0}^{1}dx\,\frac{x(1-x)}{-x(1-x)M^{2}+m^{2}},\quad C_{2}:=\mathrm{Re}\,\int_{0}^{1}dx\,\ln\frac{1}{-x(1-x)M^{2}+m^{2}}.\]
	The renormalised self-energy is
	\[\Sigma=\frac{g^{2}}{16\pi^{2}}\left(\int_{0}^{1}dx\,\ln\frac{1}{-x(1-x)p^{2}+m^{2}}-(p^{2}-M^{2})C_{1}-C_{2}\right).\]
	The imaginary part is
	\[\mathrm{Im}\,\Sigma=\frac{g^{2}}{16\pi}\int_{0}^{1}dx\,\Theta(x(1-x)p^{2}-m^{2})=\begin{cases}
		\frac{g^{2}}{16\pi}\sqrt{1-\frac{4m^{2}}{p^{2}}}&(p^{2}>4m^{2})\\
		0&(p^{2}\leq4m^{2})
	\end{cases}.\]
	
	\section{Fermion Loop}
	Lagrangian:
	\[\mathcal{L}=\frac{1}{2}\partial_{\mu}\phi\partial^{\mu}\phi-\frac{1}{2}M^{2}\phi^{2}+i\bar{\psi}\slashed{\partial}\psi-m\bar{\psi}\psi-y\phi\bar{\psi}\psi.\]
	One-loop self energy for $\phi$:
	\[\Sigma(p^{2})=iy^{2}\int\frac{d^{4}q}{(2\pi)^{4}}\frac{\mathrm{tr}[(\slashed{q}+m)(\slashed{q}-\slashed{p}+m)]}{(q^{2}-m^{2})[(q-p)^{2}-m^{2}]}-(Ap^{2}+BM^{2}).\]
	Loop calculation with DimReg ($d=4-2\epsilon$):
	\begin{align*}
		\Sigma&=4iy^{2}\int_{0}^{1}dx\,\int\frac{d^{d}q}{(2\pi)^{d}}\frac{q^{2}-q\cdot p+m^{2}}{[(1-x)(q^{2}-m^{2})+x\{(q-p)^{2}-m^{2}\}]^{2}}-(Ap^{2}+BM^{2})\\
		&=4iy^{2}\int_{0}^{1}dx\,\int\frac{d^{d}l}{(2\pi)^{d}}\frac{l^{2}+(2x-1)l\cdot p-x(1-x)p^{2}+m^{2}}{(l^{2}-\Delta)^{2}}-(Ap^{2}+BM^{2})\\
		&=4iy^{2}\int_{0}^{1}dx\,\int\frac{d^{d}l}{(2\pi)^{d}}\frac{l^{2}+\Delta}{(l^{2}-\Delta)^{2}}-(Ap^{2}+BM^{2})\\
		&=-\frac{y^{2}}{4\pi^{2}}\int_{0}^{1}dx\,\Delta\left(\frac{4\pi}{\Delta}\right)^{\epsilon}(3+\epsilon)\Gamma(\epsilon)-(Ap^{2}+BM^{2})\\
		&=-\frac{y^{2}}{4\pi^{2}}\int_{0}^{1}dx\,\Delta\left(3\epsilon^{-1}+1-3\gamma+3\ln\frac{4\pi}{\Delta}\right)-(Ap^{2}+BM^{2})\\
		&=-\frac{y^{2}}{4\pi^{2}}\left((m^{2}-p^{2}/6)(3\epsilon^{-1}+1-3\gamma)+3\int_{0}^{1}dx\,\Delta\ln\frac{4\pi}{\Delta}\right)-(Ap^{2}+BM^{2})
	\end{align*}
	where $l:=q-xp$ and $\Delta:=-x(1-x)p^{2}+m^{2}$.
	
	The on-shell renormalisation gives
	\begin{align*}
		A&=\frac{y^{2}}{4\pi^{2}}\left(\frac{1}{6}(3\epsilon^{-1}+4-3\gamma+3\ln4\pi)+3C_{3}\right),\\
		B&=\frac{y^{2}}{4\pi^{2}}\left(-\frac{m^{2}}{M^{2}}(3\epsilon^{-1}+1-3\gamma+3\ln4\pi)-\frac{1}{2}-\frac{3m^{2}}{M^{2}}C_{2}+6C_{3}\right)
	\end{align*}
	for
	\[C_{3}:=\mathrm{Re}\,\int_{0}^{1}dx\,x(1-x)\ln\frac{1}{-x(1-x)M^{2}+m^{2}}.\]
	Then the renormalised self-energy is
	\[\Sigma=-\frac{y^{2}}{4\pi^{2}}\left(\frac{p^{2}-M^{2}}{2}+3\int_{0}^{1}dx\,\Delta\ln\frac{1}{\Delta}-3m^{2}C_{2}+(3p^{2}+6M^{2})C_{3}\right).\]
	
	The imaginary part is
	\[\mathrm{Im}\,\Sigma=-\frac{3y^{2}}{4\pi}\int_{0}^{1}dx\,\Delta\Theta(-\Delta).\]
	Again, $\mathrm{Im}\,\Sigma=0$ if $p^{2}\leq4m^{2}$.
	For $p^{2}>4m^{2}$, we have
	\[\mathrm{Im}\,\Sigma=-\frac{3y^{2}}{4\pi}\int_{\frac{1}{2}(1-\sqrt{1-4m^{2}/p^{2}})}^{\frac{1}{2}(1+\sqrt{1-4m^{2}/p^{2}})}\Delta\,dx=\frac{y^{2}}{16\pi}(p^{2}-4m^{2})\sqrt{1-\frac{4m^{2}}{p^{2}}}.\]
	
	\section{Scalar and Photon Loop}
	No explicit Lagrangian but let's assume that there is a $\gamma\phi\phi'$ vertex for complex scalars $\phi$ and $\phi'$ with masses $M$ and $m$, respectively.
	
	One-loop self-energy of $\phi$:
	\[\Sigma(p^{2})=ie^{2}\int\frac{d^{4}q}{(2\pi)^{4}}\frac{(p+q)^{2}}{(q^{2}-m^{2})(q-p)^{2}}-(Ap^{2}+BM^{2}).\]
	Loop calculation with DimReg ($d=4-2\epsilon$):
	\begin{align*}
		\Sigma&=ie^{2}\int\frac{d^{d}q}{(2\pi)^{d}}\int_{0}^{1}dx\,\frac{q^{2}+2q\cdot p+p^{2}}{[(1-x)(q^{2}-m^{2})+x(q-p)^{2}]^{2}}-(Ap^{2}+BM^{2})\\
		&=ie^{2}\int\frac{d^{d}l}{(2\pi)^{d}}\int_{0}^{1}dx\,\frac{l^{2}+2(1+x)l\cdot p+(1+x)^{2}p^{2}}{(l^{2}-\Delta)^{2}}-(Ap^{2}+BM^{2})\\
		&=ie^{2}\int\frac{d^{d}l}{(2\pi)^{d}}\int_{0}^{1}dx\,\frac{l^{2}+(1+x)^{2}p^{2}}{(l^{2}-\Delta)^{2}}-(Ap^{2}+BM^{2})\\
		&=-\frac{e^{2}}{16\pi^{2}}\int_{0}^{1}dx\,\left(\frac{4\pi}{\Delta}\right)^{\epsilon}\left[(2+\epsilon)\Delta+(1+x)^{2}p^{2}\right]\Gamma(\epsilon)-(Ap^{2}+BM^{2})\\
		&=\begin{aligned}[t]
			&-\frac{e^{2}}{16\pi^{2}}\int_{0}^{1}dx\,\left((\epsilon^{-1}-\gamma)[(1+3x^{2})p^{2}+(2-2x)m^{2}]+\Delta+[(1+3x^{2})p^{2}+(2-2x)m^{2}]\ln\frac{4\pi}{\Delta}\right)\\
			&-(Ap^{2}+BM^{2})
		\end{aligned}\\
		&=\begin{aligned}[t]
			&-\frac{e^{2}}{16\pi^{2}}\left[(\epsilon^{-1}-\gamma)(2p^{2}+m^{2})-\frac{1}{6}p^{2}+\frac{1}{2}m^{2}+\int_{0}^{1}dx\,[(1+3x^{2})p^{2}+(2-2x)m^{2}]\ln\frac{4\pi}{\Delta}\right]\\
			&-(Ap^{2}+BM^{2}),
		\end{aligned}
	\end{align*}
	where $l:=q-xp$ and $\Delta:=-x(1-x)p^{2}+(1-x)m^{2}$.
	
	The imaginary part is
	\[\mathrm{Im}\,\Sigma=-\frac{e^{2}}{16\pi}\int_{0}^{1}dx\,[(1+3x^{2})p^{2}+(2-2x)m^{2}]\Theta(-\Delta).\]
	If $p^{2}\leq m^{2}$ then $\mathrm{Im}\,\Sigma=0$.
	Otherwise,
	\[\mathrm{Im}\,\Sigma=-\frac{e^{2}}{16\pi}\int_{m^{2}/p^{2}}^{1}dx\,[(1+3x^{2})p^{2}+(2-2x)m^{2}]=\frac{e^{2}}{8\pi}\left(\frac{m^{4}}{p^{2}}-p^{2}\right).\]
	
\end{document}